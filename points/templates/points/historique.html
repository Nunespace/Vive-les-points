{% extends "base.html" %}

{% block content %}
<div class="container py-4">

  <h1 class="text-center" style="font-family:'Bungee Spice', sans-serif;">
    {{ enfant.prenom }}
  </h1>
  <p class="text-center" style="font-family:'Bungee Spice', sans-serif;">
    Tu as {{ enfant.solde_points }} points.
  </p>

  <form method="post">
    {% csrf_token %}

    {# --- POINTS POSITIFS --- #}
    {{ pos_fs.management_form }}
    <div class="table-responsive mb-4">
      <table class="table table-light table-striped table-hover align-middle mb-0">
        <caption class="caption-top text-center" style="font-family:'Bungee Spice',sans-serif; background-color: cornsilk;">
          Liste des points positifs
        </caption>
        <thead>
          <tr>
            <th>Date</th>
            <th>Nombre</th>
            <th>Motif</th>
            <th class="text-center">Suppr.</th>
          </tr>
        </thead>
        <tbody>
          {% for form in pos_fs %}
            {{ form.id }}  {# Champ caché obligatoire #}
            <tr>
              <td>{{ form.date }}</td>
              <td>{{ form.nb_positif }}</td>
              <td>{{ form.motif1 }}</td>
              <td class="text-center">{{ form.DELETE }}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="4" class="text-center text-muted">Aucun point positif</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    {# --- POINTS NÉGATIFS --- #}
    {{ neg_fs.management_form }}
    <div class="table-responsive mb-4">
      <table class="table table-light table-striped table-hover align-middle mb-0">
        <caption class="caption-top text-center" style="font-family:'Bungee Spice',sans-serif; background-color: cornsilk;">
          Liste des points négatifs
        </caption>
        <thead>
          <tr>
            <th>Date</th>
            <th>Nombre</th>
            <th>Motif</th>
            <th class="text-center">Suppr.</th>
          </tr>
        </thead>
        <tbody>
          {% for form in neg_fs %}
            {{ form.id }}  {# Champ caché obligatoire #}
            <tr>
              <td>{{ form.date }}</td>
              <td>{{ form.nb_negatif }}</td>
              <td>{{ form.motif2 }}</td>
              <td class="text-center">{{ form.DELETE }}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="4" class="text-center text-muted">Aucun point négatif</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="d-flex justify-content-center gap-2">
      <a href="{% url 'points:dashboard' %}" class="btn btn-outline-secondary btn-sm">Annuler</a>
      <button type="submit" class="btn btn-primary btn-sm">Enregistrer</button>
    </div>
  </form>

</div>
{% endblock content %}
